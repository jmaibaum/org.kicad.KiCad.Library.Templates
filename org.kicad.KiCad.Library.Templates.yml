id: org.kicad.KiCad.Library.Templates
branch: stable
runtime: org.kicad.KiCad
runtime-version: stable
sdk: org.freedesktop.Sdk//22.08
build-extension: true
separate-locales: false
appstream-compose: false
build-options:
  prefix: /app/extensions/Library/Templates
modules:
- name: kicad-templates
  buildsystem: cmake-ninja
  config-opts:
  - -DKICAD_DATA=/app/extensions/Library/Templates
  post-install:
  # Copy `kicad.kicad_pro` template file from main source tree
  - install -m644 --target-directory=${FLATPAK_DEST}/template kicad/template/kicad.kicad_pro
  - install -Dm644 --target-directory=${FLATPAK_DEST}/share/metainfo org.kicad.KiCad.Library.Templates.metainfo.xml
  - appstream-compose --basename=org.kicad.KiCad.Library.Templates --prefix=${FLATPAK_DEST}
    --origin=flatpak org.kicad.KiCad.Library.Templates
  sources:
  - type: archive
    url: https://gitlab.com/kicad/libraries/kicad-templates/-/archive/6.0.7/kicad-templates-6.0.7.tar.gz
    sha256: 1da05f4067b16c4b8be8e172cc73ddc5ce05977f384dd7e531f23c7fdc69da8a
  # Add KiCad source code into `kicad` subdir for `kicad.kicad_pro` template file
  - type: archive
    url: https://gitlab.com/kicad/code/kicad/-/archive/6.0.7/kicad-6.0.7.tar.gz
    sha256: a72e88b15f360d76ea7427923a5073db5e34b5f8cfc4be389cfc24b12a71e7f9
    dest: kicad
  - type: file
    path: org.kicad.KiCad.Library.Templates.metainfo.xml
